<html>
  <head>
    <title>openxava - customizing_ru</title>
    <link rel="stylesheet" href="static/style.css" type="text/css" />
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  </head>
  <body>
    <div class="wiki" id="content_view" style="display: block;">
<div id="toc"><h1 class="nopad">Table of Contents</h1><div style="margin-left: 1em;"><a href="#xГлава 9: Расширенные возможности">Глава 9: Расширенные возможности</a></div>
<div style="margin-left: 2em;"><a href="#xГлава 9: Расширенные возможности-Редакторы">Редакторы</a></div>
<div style="margin-left: 3em;"><a href="#xГлава 9: Расширенные возможности-Редакторы-Создание собственного редактора для одного значения (Single value editors)">Создание собственного редактора для одного значения (Single value editors)</a></div>
<div style="margin-left: 3em;"><a href="#xГлава 9: Расширенные возможности-Редакторы-Создание редактора для множественных значений (Multiple values editors)">Создание редактора для множественных значений (Multiple values editors)</a></div>
<div style="margin-left: 3em;"><a href="#xГлава 9: Расширенные возможности-Редакторы-Пользовательские редакторы и стереотипы для отображения комбо-списков">Пользовательские редакторы и стереотипы для отображения комбо-списков</a></div>
<div style="margin-left: 2em;"><a href="#xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)">Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)</a></div>
<div style="margin-left: 3em;"><a href="#xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)-Пример">Пример</a></div>
<div style="margin-left: 3em;"><a href="#xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)-xava:editor">xava:editor</a></div>
<div style="margin-left: 3em;"><a href="#xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)-Теги xava:action, xava:link, xava:image, xava:button">Теги xava:action, xava:link, xava:image, xava:button</a></div>
<div style="margin-left: 3em;"><a href="#xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)-Тег xava:message (начиная с версии v2.0.3)">Тег xava:message (начиная с версии v2.0.3)</a></div>
<div style="margin-left: 3em;"><a href="#xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)-Тег xava:descriptionsList (начиная с версии v2.0.3)">Тег xava:descriptionsList (начиная с версии v2.0.3)</a></div>
</div>
<a class="wiki_link" href="overview_ru.html">1.Обзор системы</a> | <a class="wiki_link" href="my-first-ox-project_ru.html">2. Мой первый проект</a> | <a class="wiki_link" href="model_ru.html">3. Модель</a> | <a class="wiki_link" href="view_ru.html">4. Формы @View</a> | <a class="wiki_link" href="tab_ru.html">5. Списки @Tab</a> | <a class="wiki_link" href="mapping_ru.html">6. Объектно-реляционное связывание</a> | <a class="wiki_link" href="controllers_ru.html">7. Контроллеры</a> | <a class="wiki_link" href="application_ru.html">8. Приложение</a> | <strong>9. Расширенные возможности</strong><br />
<h1 id="toc0"><a name="xГлава 9: Расширенные возможности"></a>Глава 9: Расширенные возможности</h1>
 Пользовательский интерфейс, генерируемый OpenXava, имеет широчайшие возможности по настройке без необходимости разработки программного кода, полностью готов к использованию и применим в большинстве случаев. Если все же стандартное поведение OpenXava не полностью удовлетворяет ваши нужды, вы можете переопределить поведение системы, разработав свои собственные компоненты интерфейса или переопределив поведение стандартных компонент. Как это сделать, рассказано в этой главе.<br />
Например, при необходимости вы можете определять ваши собственные <a class="wiki_link" href="customizing_ru.html#toc1">редакторы</a>, используемые для редактирования/отображения свойств, и даже полностью самостоятельно строить пользовательский интерфейс (используя <a class="wiki_link" href="customizing_ru.html#toc5">пользовательские представления JSP</a>).<br />
<h2 id="toc1"><a name="xГлава 9: Расширенные возможности-Редакторы"></a>Редакторы</h2>
 <h3 id="toc2"><a name="xГлава 9: Расширенные возможности-Редакторы-Создание собственного редактора для одного значения (Single value editors)"></a>Создание собственного редактора для одного значения (Single value editors)</h3>
 Как вы, наверное, уже заметили, при определении представления мы задаем свойства, которые будут отображены, и порядок их отображения, но не описываем, как отображать эти свойства. За это в OpenXava отвечают редакторы.<br />
Итак, редактор описывает, как отображать свойство. Спецификация редактора представляет собой XML описание, совмещенное с фрагментом JSP.<br />
Для переопределения поведения редакторов OpenXava или для того, чтобы добавить свой собственный редактор, вам необходимо внести изменения в файл <em>xava/editors.xml</em>. Если такого файла нет, создайте его.<br />
Формат файла <em>editors.xml</em>:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;?xml</span> version = <span class="st0">&quot;1.0&quot;</span> encoding = <span class="st0">&quot;ISO-8859-1&quot;</span><span class="re2">?&gt;</span></span>
&nbsp;
 <span class="sc0">&lt;!DOCTYPE editors SYSTEM &quot;dtds/editors.dtd&quot;&gt;</span>
&nbsp;
 <span class="sc3"><span class="re1">&lt;editors<span class="re2">&gt;</span></span></span>
 <span class="sc3"><span class="re1">&lt;editor</span> ...<span class="re2">/&gt;</span></span> ...
 <span class="sc3"><span class="re1">&lt;/editors<span class="re2">&gt;</span></span></span></pre>

Здесь ничего сложного. Файл просто содержит определение списка редакторов.<br />
Рассмотрим описание редактора более подробно:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;editor</span></span>
<span class="sc3"> <span class="re0">url</span>=<span class="st0">&quot;url&quot;</span> &lt;!-- 1 --<span class="re2">&gt;</span></span>
 format=&quot;true|false&quot; <span class="sc-1">&lt;!-- 2 --&gt;</span>
 depends-stereotypes=&quot;stereotypes&quot; <span class="sc-1">&lt;!-- 3 --&gt;</span>
 depends-properties=&quot;properties&quot; <span class="sc-1">&lt;!-- 4 --&gt;</span>
 frame=&quot;true|false&quot; <span class="sc-1">&lt;!-- 5 --&gt;</span>
 &gt;
 <span class="sc3"><span class="re1">&lt;property</span> ... <span class="re2">/&gt;</span></span> ... <span class="sc-1">&lt;!-- 6 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;formatter</span> ... <span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 7 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;for-stereotype</span> ... <span class="re2">/&gt;</span></span> ... <span class="sc-1">&lt;!-- 8 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;for-type</span> ... <span class="re2">/&gt;</span></span> ... <span class="sc-1">&lt;!-- 8 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;for-model-property</span> ... <span class="re2">/&gt;</span></span> ... <span class="sc-1">&lt;!-- 8 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;/editor<span class="re2">&gt;</span></span></span></pre>

<ol><li><strong>url</strong> (обязательно): URL фрагмента JSP, в котором реализован редактор. Файл с фрагментом должен находится в <em>папке xava/editors</em> (внутри папке <em>web</em> вашего приложения).</li><li><strong>format</strong> (необязательно): Если аттрибут установлен в значение <em>true</em>, то OpenXava выполняет форматирование данных при передаче из HTML и Java и в обратнои направлении. Если значение аттрибута <em>false</em>, то за преобразование данных отвечает используемый редактор (обычно выполняется извлечением данных из <em>request</em> и привязки их к <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html" rel="nofollow">org.openxava.view.View</a></em>, также в обратном направлении). Значение по-умолчанию <em>true</em>.</li><li><strong>depends-stereotypes</strong> (необязательно): Список стереотипов (stereotypes) через запятую, для которых используется данный редактор.</li><li><strong>depends-properties</strong> (необязательно): Список свойств (properties, разделенных запятой), от которых редактор зависим.</li><li><strong>frame</strong> (необязательно): Если имеет значение <em>true</em>, редактор будет отображен в рамке. Значение по-умолчанию <em>false</em>. TIP: Многострочный редактор в рамке выглядит более привлекательно.</li><li><strong>property</strong> (несколько вхождений, необязательный аттрибут): Установка свойств для передачи в редактор. Используется обычно для создания многоцелевых редакторов, которые могут встречаться несколько раз в пределах одного UI.</li><li><strong>formatter</strong> (одно вхождение, необязательно): класс Java, определяющий преобразование из Java в HTML и наоборот из HTML в Java.</li><li><strong>for-stereotype</strong> или <strong>for-type,</strong> или <strong>for-model-property</strong> (обязателен один из указанных параметров, параметры не соместимы): Ассоциирует данный редактор со стереотипом, типом или конкретным свойством модели. Порядок применения параметров: сначала свойство модели, потом стереотип и в конце тип.</li></ol>Давайте посмотрим на примере определение редактора. Представлен один из редакторов, поставляемых с OpenXava, тем не менее, это хороший учебный пример для начала разработки своего редактора:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;editor</span> <span class="re0">url</span>=<span class="st0">&quot;textEditor.jsp&quot;</span><span class="re2">&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;for-type</span> <span class="re0">type</span>=<span class="st0">&quot;java.lang.String&quot;</span><span class="re2">/&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;for-type</span> <span class="re0">type</span>=<span class="st0">&quot;java.math.BigDecimal&quot;</span><span class="re2">/&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;for-type</span> <span class="re0">type</span>=<span class="st0">&quot;int&quot;</span><span class="re2">/&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;for-type</span> <span class="re0">type</span>=<span class="st0">&quot;java.lang.Integer&quot;</span><span class="re2">/&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;for-type</span> <span class="re0">type</span>=<span class="st0">&quot;long&quot;</span><span class="re2">/&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;for-type</span> <span class="re0">type</span>=<span class="st0">&quot;java.lang.Long&quot;</span><span class="re2">/&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;/editor<span class="re2">&gt;</span></span></span></pre>

Из примера видно, что к данному редактору привязана целая группа базовых типов, для которых будет использоваться данный редактор. JSP код редактора находится в файле <em>textEditor.jsp</em> (он размещен в папке <em>web/xava/editors</em> вашего проекта OX).<br />
Давайте посмотрим на код <em>textEditor.jsp</em>:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.php  {font-family:monospace;}
.php .imp {font-weight: bold; color: red;}
.php .kw1 {color: #b1b100;}
.php .kw2 {color: #000000; font-weight: bold;}
.php .kw3 {color: #990000;}
.php .kw4 {color: #009900; font-weight: bold;}
.php .co1 {color: #666666; font-style: italic;}
.php .co2 {color: #666666; font-style: italic;}
.php .co3 {color: #0000cc; font-style: italic;}
.php .co4 {color: #009933; font-style: italic;}
.php .coMULTI {color: #666666; font-style: italic;}
.php .es0 {color: #000099; font-weight: bold;}
.php .es1 {color: #000099; font-weight: bold;}
.php .es2 {color: #660099; font-weight: bold;}
.php .es3 {color: #660099; font-weight: bold;}
.php .es4 {color: #006699; font-weight: bold;}
.php .es5 {color: #006699; font-weight: bold; font-style: italic;}
.php .es6 {color: #009933; font-weight: bold;}
.php .es_h {color: #000099; font-weight: bold;}
.php .br0 {color: #009900;}
.php .sy0 {color: #339933;}
.php .sy1 {color: #000000; font-weight: bold;}
.php .st0 {color: #0000ff;}
.php .st_h {color: #0000ff;}
.php .nu0 {color: #cc66cc;}
.php .nu8 {color: #208080;}
.php .nu12 {color: #208080;}
.php .nu19 {color:#800080;}
.php .me1 {color: #004000;}
.php .me2 {color: #004000;}
.php .re0 {color: #000088;}
.php span.xtra { display:block; }

-->
</style><pre class="php"> <span class="sy1">&lt;%</span><span class="sy0">@</span> page import<span class="sy0">=</span><span class="st0">&quot;org.openxava.model.meta.MetaProperty&quot;</span> <span class="sy1">%&gt;</span>
&nbsp;
 <span class="sy1">&lt;%</span>
 String propertyKey <span class="sy0">=</span> request<span class="sy0">.</span>getParameter<span class="br0">&#40;</span><span class="st0">&quot;propertyKey&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// 1</span>
 MetaProperty p <span class="sy0">=</span> <span class="br0">&#40;</span>MetaProperty<span class="br0">&#41;</span> request<span class="sy0">.</span>getAttribute<span class="br0">&#40;</span>propertyKey<span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// 2</span>
 String fvalue <span class="sy0">=</span> <span class="br0">&#40;</span>String<span class="br0">&#41;</span> request<span class="sy0">.</span>getAttribute<span class="br0">&#40;</span>propertyKey <span class="sy0">+</span> <span class="st0">&quot;.fvalue&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// 3</span>
 String align <span class="sy0">=</span> p<span class="sy0">.</span>isNumber<span class="br0">&#40;</span><span class="br0">&#41;</span>?<span class="st0">&quot;right&quot;</span><span class="sy0">:</span><span class="st0">&quot;left&quot;</span><span class="sy0">;</span> <span class="co1">// 4</span>
 boolean editable<span class="sy0">=</span><span class="st0">&quot;true&quot;</span><span class="sy0">.</span>equals<span class="br0">&#40;</span>request<span class="sy0">.</span>getParameter<span class="br0">&#40;</span><span class="st0">&quot;editable&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// 5</span>
 String disabled<span class="sy0">=</span>editable?<span class="st0">&quot;&quot;</span><span class="sy0">:</span><span class="st0">&quot;disabled&quot;</span><span class="sy0">;</span> <span class="co1">// 5</span>
 String script <span class="sy0">=</span> request<span class="sy0">.</span>getParameter<span class="br0">&#40;</span><span class="st0">&quot;script&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// 6</span>
 boolean label <span class="sy0">=</span> org<span class="sy0">.</span>openxava<span class="sy0">.</span>util<span class="sy0">.</span>XavaPreferences<span class="sy0">.</span>getInstance<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">.</span>isReadOnlyAsLabel<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw1">if</span> <span class="br0">&#40;</span>editable <span class="sy0">||</span> <span class="sy0">!</span>label<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="co1">// 5</span>
 <span class="sy1">%&gt;</span>
 &lt;input id=&quot;<span class="sy1">&lt;%=</span>propertyKey<span class="sy1">%&gt;</span>&quot; name=&quot;<span class="sy1">&lt;%=</span>propertyKey<span class="sy1">%&gt;</span>&quot; class=editor &lt;!-- 1 --&gt;
 type=&quot;text&quot;
 title=&quot;<span class="sy1">&lt;%=</span>p<span class="sy0">.</span>getDescription<span class="br0">&#40;</span>request<span class="br0">&#41;</span><span class="sy1">%&gt;</span>&quot;
 align='<span class="sy1">&lt;%=</span>align<span class="sy1">%&gt;</span>' &lt;!-- 4 --&gt;
 maxlength=&quot;<span class="sy1">&lt;%=</span>p<span class="sy0">.</span>getSize<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy1">%&gt;</span>&quot;
 size=&quot;<span class="sy1">&lt;%=</span>p<span class="sy0">.</span>getSize<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy1">%&gt;</span>&quot;
 value=&quot;<span class="sy1">&lt;%=</span>fvalue<span class="sy1">%&gt;</span>&quot; &lt;!-- 3 --&gt;
 <span class="sy1">&lt;%=</span>disabled<span class="sy1">%&gt;</span> &lt;!-- 5 --&gt;
 <span class="sy1">&lt;%=</span>script<span class="sy1">%&gt;</span> &lt;!-- 6 --&gt;
 /&gt;
 <span class="sy1">&lt;%</span>
 <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
 <span class="sy1">%&gt;</span>
 <span class="sy1">&lt;%=</span>fvalue<span class="sy1">%&gt;</span>&amp;nbsp;
 <span class="sy1">&lt;%</span>
 <span class="br0">&#125;</span>
 <span class="sy1">%&gt;</span>
 <span class="sy1">&lt;%</span> <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>editable<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="sy1">%&gt;</span>
 &lt;input type=&quot;hidden&quot; name=&quot;<span class="sy1">&lt;%=</span>propertyKey<span class="sy1">%&gt;</span>&quot; value=&quot;<span class="sy1">&lt;%=</span>fvalue<span class="sy1">%&gt;</span>&quot;&gt;
 <span class="sy1">&lt;%</span> <span class="br0">&#125;</span> <span class="sy1">%&gt;</span></pre>

Редактор реализован на JSP. Он обрабатывает параметры HTTP запроса <em>request</em>, а также использует аттибуты запроса, специфичным для OpenXava способом (описано далее).<br />
Первове, что он делает - он получает HTML id, используя метод <em>propertyKey</em> (1). Получив id, мы может обратиться к объекту <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/model/meta/MetaProperty.html" rel="nofollow">MetaProperty</a></em> (2) (который содержит мета-информацию свойства, которая необходима для корректного редактирования значения свойсвта). Аттрибут <em>fvalue</em> (3) содержит значение редактируемого свойства, отформатированное и готовое к отображению в пользовательском интерфейсе. Аттрибуты <em>Align</em> (4) (выравнивание) и <em>editable</em> (5) (возможность редактировать) также извлекаются из запроса. Также редактору необходимо извлечь фрагмент JavaScript (6), который нужен для HTML-реализации редактора.<br />
Несмотря на то, что создание редактора на JSP - задача довольно простая, многие вещи, которые, казалось бы, можно сделать только через создание своего редактора, проще и правильно делать изменением конфигурации OX. Приведём пример, попробуйте в файл <em>xava/editors.xml</em> добавить следующее:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;editor</span> <span class="re0">url</span>=<span class="st0">&quot;textEditor.jsp&quot;</span><span class="re2">&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;formatter</span> <span class="re0">class</span>=<span class="st0">&quot;org.openxava.formatters.UpperCaseFormatter&quot;</span><span class="re2">/&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;for-type</span> <span class="re0">type</span>=<span class="st0">&quot;java.lang.String&quot;</span><span class="re2">/&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;/editor<span class="re2">&gt;</span></span></span></pre>

Таким способом, мы можем переопределить поведение OpenXava для свойств, имеющих тип <em>String</em> type. Теперь все свойства типа <em>String</em> будут отображаться и вводиться только в верхнем регистре.<br />
Давайте посмотрим на код класса UpperCaseFormatter:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.java5  {font-family:monospace;}
.java5 .imp {font-weight: bold; color: red;}
.java5 .kw1 {color: #000000;  font-weight: bold;}
.java5 .kw2 {color: #000000; font-weight: bold;}
.java5 .kw3 {color: #006600; font-weight: bold;}
.java5 .kw4 {color: #006600; font-weight: bold;}
.java5 .kw5 {color: #003399; font-weight: bold;}
.java5 .kw6 {color: #003399; font-weight: bold;}
.java5 .kw7 {color: #003399; font-weight: bold;}
.java5 .kw8 {color: #003399; font-weight: bold;}
.java5 .kw9 {color: #003399; font-weight: bold;}
.java5 .kw10 {color: #003399; font-weight: bold;}
.java5 .kw11 {color: #003399; font-weight: bold;}
.java5 .kw12 {color: #003399; font-weight: bold;}
.java5 .kw13 {color: #003399; font-weight: bold;}
.java5 .kw14 {color: #003399; font-weight: bold;}
.java5 .kw15 {color: #003399; font-weight: bold;}
.java5 .kw16 {color: #003399; font-weight: bold;}
.java5 .kw17 {color: #003399; font-weight: bold;}
.java5 .kw18 {color: #003399; font-weight: bold;}
.java5 .kw19 {color: #003399; font-weight: bold;}
.java5 .kw20 {color: #003399; font-weight: bold;}
.java5 .kw21 {color: #003399; font-weight: bold;}
.java5 .kw22 {color: #003399; font-weight: bold;}
.java5 .kw23 {color: #003399; font-weight: bold;}
.java5 .kw24 {color: #003399; font-weight: bold;}
.java5 .kw25 {color: #003399; font-weight: bold;}
.java5 .kw26 {color: #003399; font-weight: bold;}
.java5 .kw27 {color: #003399; font-weight: bold;}
.java5 .kw28 {color: #003399; font-weight: bold;}
.java5 .kw29 {color: #003399; font-weight: bold;}
.java5 .kw30 {color: #003399; font-weight: bold;}
.java5 .kw31 {color: #003399; font-weight: bold;}
.java5 .kw32 {color: #003399; font-weight: bold;}
.java5 .kw33 {color: #003399; font-weight: bold;}
.java5 .kw34 {color: #003399; font-weight: bold;}
.java5 .kw35 {color: #003399; font-weight: bold;}
.java5 .kw36 {color: #003399; font-weight: bold;}
.java5 .kw37 {color: #003399; font-weight: bold;}
.java5 .kw38 {color: #003399; font-weight: bold;}
.java5 .kw39 {color: #003399; font-weight: bold;}
.java5 .kw40 {color: #003399; font-weight: bold;}
.java5 .kw41 {color: #003399; font-weight: bold;}
.java5 .kw42 {color: #003399; font-weight: bold;}
.java5 .kw43 {color: #003399; font-weight: bold;}
.java5 .kw44 {color: #003399; font-weight: bold;}
.java5 .kw45 {color: #003399; font-weight: bold;}
.java5 .kw46 {color: #003399; font-weight: bold;}
.java5 .kw47 {color: #003399; font-weight: bold;}
.java5 .kw48 {color: #003399; font-weight: bold;}
.java5 .kw49 {color: #003399; font-weight: bold;}
.java5 .kw50 {color: #003399; font-weight: bold;}
.java5 .kw51 {color: #003399; font-weight: bold;}
.java5 .kw52 {color: #003399; font-weight: bold;}
.java5 .kw53 {color: #003399; font-weight: bold;}
.java5 .kw54 {color: #003399; font-weight: bold;}
.java5 .kw55 {color: #003399; font-weight: bold;}
.java5 .kw56 {color: #003399; font-weight: bold;}
.java5 .kw57 {color: #003399; font-weight: bold;}
.java5 .kw58 {color: #003399; font-weight: bold;}
.java5 .kw59 {color: #003399; font-weight: bold;}
.java5 .kw60 {color: #003399; font-weight: bold;}
.java5 .kw61 {color: #003399; font-weight: bold;}
.java5 .kw62 {color: #003399; font-weight: bold;}
.java5 .kw63 {color: #003399; font-weight: bold;}
.java5 .kw64 {color: #003399; font-weight: bold;}
.java5 .kw65 {color: #003399; font-weight: bold;}
.java5 .kw66 {color: #003399; font-weight: bold;}
.java5 .kw67 {color: #003399; font-weight: bold;}
.java5 .kw68 {color: #003399; font-weight: bold;}
.java5 .kw69 {color: #003399; font-weight: bold;}
.java5 .kw70 {color: #003399; font-weight: bold;}
.java5 .kw71 {color: #003399; font-weight: bold;}
.java5 .kw72 {color: #003399; font-weight: bold;}
.java5 .kw73 {color: #003399; font-weight: bold;}
.java5 .kw74 {color: #003399; font-weight: bold;}
.java5 .kw75 {color: #003399; font-weight: bold;}
.java5 .kw76 {color: #003399; font-weight: bold;}
.java5 .kw77 {color: #003399; font-weight: bold;}
.java5 .kw78 {color: #003399; font-weight: bold;}
.java5 .kw79 {color: #003399; font-weight: bold;}
.java5 .kw80 {color: #003399; font-weight: bold;}
.java5 .kw81 {color: #003399; font-weight: bold;}
.java5 .kw82 {color: #003399; font-weight: bold;}
.java5 .kw83 {color: #003399; font-weight: bold;}
.java5 .kw84 {color: #003399; font-weight: bold;}
.java5 .kw85 {color: #003399; font-weight: bold;}
.java5 .kw86 {color: #003399; font-weight: bold;}
.java5 .kw87 {color: #003399; font-weight: bold;}
.java5 .kw88 {color: #003399; font-weight: bold;}
.java5 .kw89 {color: #003399; font-weight: bold;}
.java5 .kw90 {color: #003399; font-weight: bold;}
.java5 .kw91 {color: #003399; font-weight: bold;}
.java5 .kw92 {color: #003399; font-weight: bold;}
.java5 .kw93 {color: #003399; font-weight: bold;}
.java5 .kw94 {color: #003399; font-weight: bold;}
.java5 .kw95 {color: #003399; font-weight: bold;}
.java5 .kw96 {color: #003399; font-weight: bold;}
.java5 .kw97 {color: #003399; font-weight: bold;}
.java5 .kw98 {color: #003399; font-weight: bold;}
.java5 .kw99 {color: #003399; font-weight: bold;}
.java5 .kw100 {color: #003399; font-weight: bold;}
.java5 .kw101 {color: #003399; font-weight: bold;}
.java5 .kw102 {color: #003399; font-weight: bold;}
.java5 .kw103 {color: #003399; font-weight: bold;}
.java5 .kw104 {color: #003399; font-weight: bold;}
.java5 .kw105 {color: #003399; font-weight: bold;}
.java5 .kw106 {color: #003399; font-weight: bold;}
.java5 .kw107 {color: #003399; font-weight: bold;}
.java5 .kw108 {color: #003399; font-weight: bold;}
.java5 .kw109 {color: #003399; font-weight: bold;}
.java5 .kw110 {color: #003399; font-weight: bold;}
.java5 .kw111 {color: #003399; font-weight: bold;}
.java5 .kw112 {color: #003399; font-weight: bold;}
.java5 .kw113 {color: #003399; font-weight: bold;}
.java5 .kw114 {color: #003399; font-weight: bold;}
.java5 .kw115 {color: #003399; font-weight: bold;}
.java5 .kw116 {color: #003399; font-weight: bold;}
.java5 .kw117 {color: #003399; font-weight: bold;}
.java5 .kw118 {color: #003399; font-weight: bold;}
.java5 .kw119 {color: #003399; font-weight: bold;}
.java5 .kw120 {color: #003399; font-weight: bold;}
.java5 .kw121 {color: #003399; font-weight: bold;}
.java5 .kw122 {color: #003399; font-weight: bold;}
.java5 .kw123 {color: #003399; font-weight: bold;}
.java5 .kw124 {color: #003399; font-weight: bold;}
.java5 .kw125 {color: #003399; font-weight: bold;}
.java5 .kw126 {color: #003399; font-weight: bold;}
.java5 .kw127 {color: #003399; font-weight: bold;}
.java5 .kw128 {color: #003399; font-weight: bold;}
.java5 .kw129 {color: #003399; font-weight: bold;}
.java5 .kw130 {color: #003399; font-weight: bold;}
.java5 .kw131 {color: #003399; font-weight: bold;}
.java5 .kw132 {color: #003399; font-weight: bold;}
.java5 .kw133 {color: #003399; font-weight: bold;}
.java5 .kw134 {color: #003399; font-weight: bold;}
.java5 .kw135 {color: #003399; font-weight: bold;}
.java5 .kw136 {color: #003399; font-weight: bold;}
.java5 .kw137 {color: #003399; font-weight: bold;}
.java5 .kw138 {color: #003399; font-weight: bold;}
.java5 .kw139 {color: #003399; font-weight: bold;}
.java5 .kw140 {color: #003399; font-weight: bold;}
.java5 .kw141 {color: #003399; font-weight: bold;}
.java5 .kw142 {color: #003399; font-weight: bold;}
.java5 .kw143 {color: #003399; font-weight: bold;}
.java5 .kw144 {color: #003399; font-weight: bold;}
.java5 .kw145 {color: #003399; font-weight: bold;}
.java5 .kw146 {color: #003399; font-weight: bold;}
.java5 .kw147 {color: #003399; font-weight: bold;}
.java5 .kw148 {color: #003399; font-weight: bold;}
.java5 .kw149 {color: #003399; font-weight: bold;}
.java5 .kw150 {color: #003399; font-weight: bold;}
.java5 .kw151 {color: #003399; font-weight: bold;}
.java5 .kw152 {color: #003399; font-weight: bold;}
.java5 .kw153 {color: #003399; font-weight: bold;}
.java5 .kw154 {color: #003399; font-weight: bold;}
.java5 .kw155 {color: #003399; font-weight: bold;}
.java5 .kw156 {color: #003399; font-weight: bold;}
.java5 .kw157 {color: #003399; font-weight: bold;}
.java5 .kw158 {color: #003399; font-weight: bold;}
.java5 .kw159 {color: #003399; font-weight: bold;}
.java5 .kw160 {color: #003399; font-weight: bold;}
.java5 .kw161 {color: #003399; font-weight: bold;}
.java5 .kw162 {color: #003399; font-weight: bold;}
.java5 .kw163 {color: #003399; font-weight: bold;}
.java5 .kw164 {color: #003399; font-weight: bold;}
.java5 .kw165 {color: #003399; font-weight: bold;}
.java5 .kw166 {color: #003399; font-weight: bold;}
.java5 .co1 {color: #666666; font-style: italic;}
.java5 .co2 {color: #006699;}
.java5 .co3 {color: #008000; font-style: italic; font-weight: bold;}
.java5 .coMULTI {color: #666666; font-style: italic;}
.java5 .es0 {color: #000099; font-weight: bold;}
.java5 .br0 {color: #009900;}
.java5 .sy0 {color: #339933;}
.java5 .st0 {color: #0000ff;}
.java5 .nu0 {color: #cc66cc;}
.java5 .me1 {color: #006633;}
.java5 .me2 {color: #006633;}
.java5 span.xtra { display:block; }

-->
</style><pre class="java5"> <span class="kw2">package</span> <span class="co2">org.openxava.formatters</span><span class="sy0">;</span>
&nbsp;
 <span class="kw2">import</span> <span class="co2">javax.servlet.http.*</span><span class="sy0">;</span>
&nbsp;
 <span class="co3">/**
 * @author Javier Paniza
 */</span>
&nbsp;
 <span class="kw2">public</span> <span class="kw2">class</span> UpperCaseFormatter <span class="kw2">implements</span> IFormatter <span class="br0">&#123;</span> <span class="co1">// 1</span>
&nbsp;
 <span class="kw2">public</span> <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> format<span class="br0">&#40;</span>HttpServletRequest request, <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+Object"><span class="kw166">Object</span></a> string<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="co1">// 2</span>
 <span class="kw2">return</span> string==<span class="kw4">null</span><span class="sy0">?</span><span class="st0">&quot;&quot;</span>:string.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toUpperCase</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
&nbsp;
 <span class="kw2">public</span> <a href="http://www.google.com/search?sitesearch=java.sun.com&amp;q=allinurl%3Aj2se%2F1+5+0%2Fdocs%2Fapi+Object"><span class="kw166">Object</span></a> parse<span class="br0">&#40;</span>HttpServletRequest request, <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> string<span class="br0">&#41;</span> <span class="br0">&#123;</span> <span class="co1">// 3</span>
 <span class="kw2">return</span> string==<span class="kw4">null</span><span class="sy0">?</span><span class="st0">&quot;&quot;</span>:string.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toUpperCase</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="br0">&#125;</span>
&nbsp;
 <span class="br0">&#125;</span></pre>

Первое, на что нужно обратить внимание, это то, что класс-форматтер должен реализовывать интерфейс <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/formatters/IFormatter.html" rel="nofollow">IFormatter</a></em> (1). Что в свою очередь приводит к необходимости реализовать методв <em>format()</em> (2), который предназначен для преобразования (форматирования) значения свойства (которое обычно является объектом Java) в строку, которая должна корректно отображаться в HTML. А также необходимо реализовать метод <em>parse()</em> (3), который выполняет обратное преобразование - строка, полученная как результат выполнения формы HTML, должна быть преобразована в значение, которое возможно присвоить свойству.<br />
<h3 id="toc3"><a name="xГлава 9: Расширенные возможности-Редакторы-Создание редактора для множественных значений (Multiple values editors)"></a>Создание редактора для множественных значений (Multiple values editors)</h3>
 Определение редактора многожественных значений происходит примерно также, как определение редактора одного значения, которое мы обсуждали в предыдущем разделе.<br />
Предположим, что вы хотите определить новый стереотип REGIONS, который позволяет пользователю выбрать более одного региона для одного свойства. Использовать стереотип очень просто:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.java5  {font-family:monospace;}
.java5 .imp {font-weight: bold; color: red;}
.java5 .kw1 {color: #000000;  font-weight: bold;}
.java5 .kw2 {color: #000000; font-weight: bold;}
.java5 .kw3 {color: #006600; font-weight: bold;}
.java5 .kw4 {color: #006600; font-weight: bold;}
.java5 .kw5 {color: #003399; font-weight: bold;}
.java5 .kw6 {color: #003399; font-weight: bold;}
.java5 .kw7 {color: #003399; font-weight: bold;}
.java5 .kw8 {color: #003399; font-weight: bold;}
.java5 .kw9 {color: #003399; font-weight: bold;}
.java5 .kw10 {color: #003399; font-weight: bold;}
.java5 .kw11 {color: #003399; font-weight: bold;}
.java5 .kw12 {color: #003399; font-weight: bold;}
.java5 .kw13 {color: #003399; font-weight: bold;}
.java5 .kw14 {color: #003399; font-weight: bold;}
.java5 .kw15 {color: #003399; font-weight: bold;}
.java5 .kw16 {color: #003399; font-weight: bold;}
.java5 .kw17 {color: #003399; font-weight: bold;}
.java5 .kw18 {color: #003399; font-weight: bold;}
.java5 .kw19 {color: #003399; font-weight: bold;}
.java5 .kw20 {color: #003399; font-weight: bold;}
.java5 .kw21 {color: #003399; font-weight: bold;}
.java5 .kw22 {color: #003399; font-weight: bold;}
.java5 .kw23 {color: #003399; font-weight: bold;}
.java5 .kw24 {color: #003399; font-weight: bold;}
.java5 .kw25 {color: #003399; font-weight: bold;}
.java5 .kw26 {color: #003399; font-weight: bold;}
.java5 .kw27 {color: #003399; font-weight: bold;}
.java5 .kw28 {color: #003399; font-weight: bold;}
.java5 .kw29 {color: #003399; font-weight: bold;}
.java5 .kw30 {color: #003399; font-weight: bold;}
.java5 .kw31 {color: #003399; font-weight: bold;}
.java5 .kw32 {color: #003399; font-weight: bold;}
.java5 .kw33 {color: #003399; font-weight: bold;}
.java5 .kw34 {color: #003399; font-weight: bold;}
.java5 .kw35 {color: #003399; font-weight: bold;}
.java5 .kw36 {color: #003399; font-weight: bold;}
.java5 .kw37 {color: #003399; font-weight: bold;}
.java5 .kw38 {color: #003399; font-weight: bold;}
.java5 .kw39 {color: #003399; font-weight: bold;}
.java5 .kw40 {color: #003399; font-weight: bold;}
.java5 .kw41 {color: #003399; font-weight: bold;}
.java5 .kw42 {color: #003399; font-weight: bold;}
.java5 .kw43 {color: #003399; font-weight: bold;}
.java5 .kw44 {color: #003399; font-weight: bold;}
.java5 .kw45 {color: #003399; font-weight: bold;}
.java5 .kw46 {color: #003399; font-weight: bold;}
.java5 .kw47 {color: #003399; font-weight: bold;}
.java5 .kw48 {color: #003399; font-weight: bold;}
.java5 .kw49 {color: #003399; font-weight: bold;}
.java5 .kw50 {color: #003399; font-weight: bold;}
.java5 .kw51 {color: #003399; font-weight: bold;}
.java5 .kw52 {color: #003399; font-weight: bold;}
.java5 .kw53 {color: #003399; font-weight: bold;}
.java5 .kw54 {color: #003399; font-weight: bold;}
.java5 .kw55 {color: #003399; font-weight: bold;}
.java5 .kw56 {color: #003399; font-weight: bold;}
.java5 .kw57 {color: #003399; font-weight: bold;}
.java5 .kw58 {color: #003399; font-weight: bold;}
.java5 .kw59 {color: #003399; font-weight: bold;}
.java5 .kw60 {color: #003399; font-weight: bold;}
.java5 .kw61 {color: #003399; font-weight: bold;}
.java5 .kw62 {color: #003399; font-weight: bold;}
.java5 .kw63 {color: #003399; font-weight: bold;}
.java5 .kw64 {color: #003399; font-weight: bold;}
.java5 .kw65 {color: #003399; font-weight: bold;}
.java5 .kw66 {color: #003399; font-weight: bold;}
.java5 .kw67 {color: #003399; font-weight: bold;}
.java5 .kw68 {color: #003399; font-weight: bold;}
.java5 .kw69 {color: #003399; font-weight: bold;}
.java5 .kw70 {color: #003399; font-weight: bold;}
.java5 .kw71 {color: #003399; font-weight: bold;}
.java5 .kw72 {color: #003399; font-weight: bold;}
.java5 .kw73 {color: #003399; font-weight: bold;}
.java5 .kw74 {color: #003399; font-weight: bold;}
.java5 .kw75 {color: #003399; font-weight: bold;}
.java5 .kw76 {color: #003399; font-weight: bold;}
.java5 .kw77 {color: #003399; font-weight: bold;}
.java5 .kw78 {color: #003399; font-weight: bold;}
.java5 .kw79 {color: #003399; font-weight: bold;}
.java5 .kw80 {color: #003399; font-weight: bold;}
.java5 .kw81 {color: #003399; font-weight: bold;}
.java5 .kw82 {color: #003399; font-weight: bold;}
.java5 .kw83 {color: #003399; font-weight: bold;}
.java5 .kw84 {color: #003399; font-weight: bold;}
.java5 .kw85 {color: #003399; font-weight: bold;}
.java5 .kw86 {color: #003399; font-weight: bold;}
.java5 .kw87 {color: #003399; font-weight: bold;}
.java5 .kw88 {color: #003399; font-weight: bold;}
.java5 .kw89 {color: #003399; font-weight: bold;}
.java5 .kw90 {color: #003399; font-weight: bold;}
.java5 .kw91 {color: #003399; font-weight: bold;}
.java5 .kw92 {color: #003399; font-weight: bold;}
.java5 .kw93 {color: #003399; font-weight: bold;}
.java5 .kw94 {color: #003399; font-weight: bold;}
.java5 .kw95 {color: #003399; font-weight: bold;}
.java5 .kw96 {color: #003399; font-weight: bold;}
.java5 .kw97 {color: #003399; font-weight: bold;}
.java5 .kw98 {color: #003399; font-weight: bold;}
.java5 .kw99 {color: #003399; font-weight: bold;}
.java5 .kw100 {color: #003399; font-weight: bold;}
.java5 .kw101 {color: #003399; font-weight: bold;}
.java5 .kw102 {color: #003399; font-weight: bold;}
.java5 .kw103 {color: #003399; font-weight: bold;}
.java5 .kw104 {color: #003399; font-weight: bold;}
.java5 .kw105 {color: #003399; font-weight: bold;}
.java5 .kw106 {color: #003399; font-weight: bold;}
.java5 .kw107 {color: #003399; font-weight: bold;}
.java5 .kw108 {color: #003399; font-weight: bold;}
.java5 .kw109 {color: #003399; font-weight: bold;}
.java5 .kw110 {color: #003399; font-weight: bold;}
.java5 .kw111 {color: #003399; font-weight: bold;}
.java5 .kw112 {color: #003399; font-weight: bold;}
.java5 .kw113 {color: #003399; font-weight: bold;}
.java5 .kw114 {color: #003399; font-weight: bold;}
.java5 .kw115 {color: #003399; font-weight: bold;}
.java5 .kw116 {color: #003399; font-weight: bold;}
.java5 .kw117 {color: #003399; font-weight: bold;}
.java5 .kw118 {color: #003399; font-weight: bold;}
.java5 .kw119 {color: #003399; font-weight: bold;}
.java5 .kw120 {color: #003399; font-weight: bold;}
.java5 .kw121 {color: #003399; font-weight: bold;}
.java5 .kw122 {color: #003399; font-weight: bold;}
.java5 .kw123 {color: #003399; font-weight: bold;}
.java5 .kw124 {color: #003399; font-weight: bold;}
.java5 .kw125 {color: #003399; font-weight: bold;}
.java5 .kw126 {color: #003399; font-weight: bold;}
.java5 .kw127 {color: #003399; font-weight: bold;}
.java5 .kw128 {color: #003399; font-weight: bold;}
.java5 .kw129 {color: #003399; font-weight: bold;}
.java5 .kw130 {color: #003399; font-weight: bold;}
.java5 .kw131 {color: #003399; font-weight: bold;}
.java5 .kw132 {color: #003399; font-weight: bold;}
.java5 .kw133 {color: #003399; font-weight: bold;}
.java5 .kw134 {color: #003399; font-weight: bold;}
.java5 .kw135 {color: #003399; font-weight: bold;}
.java5 .kw136 {color: #003399; font-weight: bold;}
.java5 .kw137 {color: #003399; font-weight: bold;}
.java5 .kw138 {color: #003399; font-weight: bold;}
.java5 .kw139 {color: #003399; font-weight: bold;}
.java5 .kw140 {color: #003399; font-weight: bold;}
.java5 .kw141 {color: #003399; font-weight: bold;}
.java5 .kw142 {color: #003399; font-weight: bold;}
.java5 .kw143 {color: #003399; font-weight: bold;}
.java5 .kw144 {color: #003399; font-weight: bold;}
.java5 .kw145 {color: #003399; font-weight: bold;}
.java5 .kw146 {color: #003399; font-weight: bold;}
.java5 .kw147 {color: #003399; font-weight: bold;}
.java5 .kw148 {color: #003399; font-weight: bold;}
.java5 .kw149 {color: #003399; font-weight: bold;}
.java5 .kw150 {color: #003399; font-weight: bold;}
.java5 .kw151 {color: #003399; font-weight: bold;}
.java5 .kw152 {color: #003399; font-weight: bold;}
.java5 .kw153 {color: #003399; font-weight: bold;}
.java5 .kw154 {color: #003399; font-weight: bold;}
.java5 .kw155 {color: #003399; font-weight: bold;}
.java5 .kw156 {color: #003399; font-weight: bold;}
.java5 .kw157 {color: #003399; font-weight: bold;}
.java5 .kw158 {color: #003399; font-weight: bold;}
.java5 .kw159 {color: #003399; font-weight: bold;}
.java5 .kw160 {color: #003399; font-weight: bold;}
.java5 .kw161 {color: #003399; font-weight: bold;}
.java5 .kw162 {color: #003399; font-weight: bold;}
.java5 .kw163 {color: #003399; font-weight: bold;}
.java5 .kw164 {color: #003399; font-weight: bold;}
.java5 .kw165 {color: #003399; font-weight: bold;}
.java5 .kw166 {color: #003399; font-weight: bold;}
.java5 .co1 {color: #666666; font-style: italic;}
.java5 .co2 {color: #006699;}
.java5 .co3 {color: #008000; font-style: italic; font-weight: bold;}
.java5 .coMULTI {color: #666666; font-style: italic;}
.java5 .es0 {color: #000099; font-weight: bold;}
.java5 .br0 {color: #009900;}
.java5 .sy0 {color: #339933;}
.java5 .st0 {color: #0000ff;}
.java5 .nu0 {color: #cc66cc;}
.java5 .me1 {color: #006633;}
.java5 .me2 {color: #006633;}
.java5 span.xtra { display:block; }

-->
</style><pre class="java5"> @Stereotype<span class="br0">&#40;</span><span class="st0">&quot;REGIONS&quot;</span><span class="br0">&#41;</span>
 <span class="kw2">private</span> <a href="http://java.sun.com/j2se/1%2E5%2E0/docs/api/java/lang/String.html"><span class="kw21">String</span></a> <span class="br0">&#91;</span><span class="br0">&#93;</span> regions<span class="sy0">;</span>
&nbsp;</pre>

Затем вам необходимо добавить новую строку в файл <em>stereotype-type-default.xml</em>:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;for</span> <span class="re0">stereotype</span>=<span class="st0">&quot;REGIONS&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;String []&quot;</span><span class="re2">/&gt;</span></span></pre>

А также определить новый редактор в файле <em>editors.xml</em>:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;editor</span> <span class="re0">url</span>=<span class="st0">&quot;regionsEditor.jsp&quot;</span><span class="re2">&gt;</span></span> <span class="sc-1">&lt;!-- 1 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;regionsCount&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;3&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 2 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;formatter</span> <span class="re0">class</span>=<span class="st0">&quot;org.openxava.formatters.MultipleValuesByPassFormatter&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 3 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;for-stereotype</span> <span class="re0">stereotype</span>=<span class="st0">&quot;REGIONS&quot;</span><span class="re2">/&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;/editor<span class="re2">&gt;</span></span></span></pre>

Объясним подробнее определение нового редактора:<br />
<ul><li><em>regionsEditor.jsp</em> (1) - это файл JSP, отвечающий за отрисовку редактора. Вы можете определить свойства, которые будут отсылаться в JSP как параметры запроса (request parameters (2)).</li><li>Класс форматера должен реализовывать интерфейс <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/formatters/IMultipleValuesFormatter.html" rel="nofollow">IMultipleValuesFormatter</a></em>, который аналогичен <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/formatters/IFormatter.html" rel="nofollow">IFormatter</a></em>, но в отличии от исходного использует массив строк <em>String []</em> вместо одной строки <em>String</em>. В нашем примере мы реализуем простейший форматер, который ничего полезного не делает.</li></ul>И наконец, нужно написать свой JSP-редактор:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.php  {font-family:monospace;}
.php .imp {font-weight: bold; color: red;}
.php .kw1 {color: #b1b100;}
.php .kw2 {color: #000000; font-weight: bold;}
.php .kw3 {color: #990000;}
.php .kw4 {color: #009900; font-weight: bold;}
.php .co1 {color: #666666; font-style: italic;}
.php .co2 {color: #666666; font-style: italic;}
.php .co3 {color: #0000cc; font-style: italic;}
.php .co4 {color: #009933; font-style: italic;}
.php .coMULTI {color: #666666; font-style: italic;}
.php .es0 {color: #000099; font-weight: bold;}
.php .es1 {color: #000099; font-weight: bold;}
.php .es2 {color: #660099; font-weight: bold;}
.php .es3 {color: #660099; font-weight: bold;}
.php .es4 {color: #006699; font-weight: bold;}
.php .es5 {color: #006699; font-weight: bold; font-style: italic;}
.php .es6 {color: #009933; font-weight: bold;}
.php .es_h {color: #000099; font-weight: bold;}
.php .br0 {color: #009900;}
.php .sy0 {color: #339933;}
.php .sy1 {color: #000000; font-weight: bold;}
.php .st0 {color: #0000ff;}
.php .st_h {color: #0000ff;}
.php .nu0 {color: #cc66cc;}
.php .nu8 {color: #208080;}
.php .nu12 {color: #208080;}
.php .nu19 {color:#800080;}
.php .me1 {color: #004000;}
.php .me2 {color: #004000;}
.php .re0 {color: #000088;}
.php span.xtra { display:block; }

-->
</style><pre class="php"> <span class="sy1">&lt;%</span><span class="sy0">@</span> page import<span class="sy0">=</span><span class="st0">&quot;java.util.Collection&quot;</span> <span class="sy1">%&gt;</span>
 <span class="sy1">&lt;%</span><span class="sy0">@</span> page import<span class="sy0">=</span><span class="st0">&quot;java.util.Collections&quot;</span> <span class="sy1">%&gt;</span>
 <span class="sy1">&lt;%</span><span class="sy0">@</span> page import<span class="sy0">=</span><span class="st0">&quot;java.util.Arrays&quot;</span> <span class="sy1">%&gt;</span>
 <span class="sy1">&lt;%</span><span class="sy0">@</span> page import<span class="sy0">=</span><span class="st0">&quot;org.openxava.util.Labels&quot;</span> <span class="sy1">%&gt;</span>
&nbsp;
 &lt;jsp:useBean id=&quot;style&quot; class=&quot;org.openxava.web.style.Style&quot; scope=&quot;request&quot;/&gt;
&nbsp;
 <span class="sy1">&lt;%</span>
 String propertyKey <span class="sy0">=</span> request<span class="sy0">.</span>getParameter<span class="br0">&#40;</span><span class="st0">&quot;propertyKey&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 String <span class="br0">&#91;</span><span class="br0">&#93;</span> fvalues <span class="sy0">=</span> <span class="br0">&#40;</span>String <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span> request<span class="sy0">.</span>getAttribute<span class="br0">&#40;</span>propertyKey <span class="sy0">+</span> <span class="st0">&quot;.fvalue&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">// 1</span>
 boolean editable<span class="sy0">=</span><span class="st0">&quot;true&quot;</span><span class="sy0">.</span>equals<span class="br0">&#40;</span>request<span class="sy0">.</span>getParameter<span class="br0">&#40;</span><span class="st0">&quot;editable&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 String disabled<span class="sy0">=</span>editable?<span class="st0">&quot;&quot;</span><span class="sy0">:</span><span class="st0">&quot;disabled&quot;</span><span class="sy0">;</span>
 String script <span class="sy0">=</span> request<span class="sy0">.</span>getParameter<span class="br0">&#40;</span><span class="st0">&quot;script&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 boolean label <span class="sy0">=</span> org<span class="sy0">.</span>openxava<span class="sy0">.</span>util<span class="sy0">.</span>XavaPreferences<span class="sy0">.</span>getInstance<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">.</span>isReadOnlyAsLabel<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="kw1">if</span> <span class="br0">&#40;</span>editable <span class="sy0">||</span> <span class="sy0">!</span>label<span class="br0">&#41;</span> <span class="br0">&#123;</span>
 String sregionsCount <span class="sy0">=</span> request<span class="sy0">.</span>getParameter<span class="br0">&#40;</span><span class="st0">&quot;regionsCount&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
 int regionsCount <span class="sy0">=</span> sregionsCount <span class="sy0">==</span> <span class="kw4">null</span>?<span class="nu0">5</span><span class="sy0">:</span>Integer<span class="sy0">.</span>parseInt<span class="br0">&#40;</span>sregionsCount<span class="br0">&#41;</span><span class="sy0">;</span>
 Collection regions <span class="sy0">=</span> fvalues<span class="sy0">==</span><span class="kw4">null</span>?Collections<span class="sy0">.</span>EMPTY_LIST<span class="sy0">:</span>Arrays<span class="sy0">.</span>asList<span class="br0">&#40;</span>fvalues<span class="br0">&#41;</span><span class="sy0">;</span>
 <span class="sy1">%&gt;</span>
 &lt;select id=&quot;<span class="sy1">&lt;%=</span>propertyKey<span class="sy1">%&gt;</span>&quot; name=&quot;<span class="sy1">&lt;%=</span>propertyKey<span class="sy1">%&gt;</span>&quot; multiple=&quot;multiple&quot;
 class=<span class="sy1">&lt;%=</span>style<span class="sy0">.</span>getEditor<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy1">%&gt;</span>
 <span class="sy1">&lt;%=</span>disabled<span class="sy1">%&gt;</span>
 <span class="sy1">&lt;%=</span>script<span class="sy1">%&gt;</span>&gt;
 <span class="sy1">&lt;%</span>
 <span class="kw1">for</span> <span class="br0">&#40;</span>int i<span class="sy0">=</span><span class="nu0">1</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>regionsCount<span class="sy0">+</span><span class="nu0">1</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
 String selected <span class="sy0">=</span> regions<span class="sy0">.</span>contains<span class="br0">&#40;</span>Integer<span class="sy0">.</span>toString<span class="br0">&#40;</span>i<span class="br0">&#41;</span><span class="br0">&#41;</span>?<span class="st0">&quot;selected&quot;</span><span class="sy0">:</span><span class="st0">&quot;&quot;</span><span class="sy0">;</span>
 <span class="sy1">%&gt;</span>
 &lt;option
 value=&quot;<span class="sy1">&lt;%=</span>i<span class="sy1">%&gt;</span>&quot; <span class="sy1">&lt;%=</span>selected<span class="sy1">%&gt;</span>&gt;
 <span class="sy1">&lt;%=</span>Labels<span class="sy0">.</span>get<span class="br0">&#40;</span><span class="st0">&quot;regions.&quot;</span> <span class="sy0">+</span> i<span class="sy0">,</span> request<span class="sy0">.</span>getLocale<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy1">%&gt;</span>
 &lt;/option&gt;
 <span class="sy1">&lt;%</span>
 <span class="br0">&#125;</span>
 <span class="sy1">%&gt;</span>
 &lt;/select&gt;
 <span class="sy1">&lt;%</span>
 <span class="br0">&#125;</span>
 <span class="kw1">else</span> <span class="br0">&#123;</span>
 <span class="kw1">for</span> <span class="br0">&#40;</span>int i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>fvalues<span class="sy0">.</span>length<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
 <span class="sy1">%&gt;</span>
 <span class="sy1">&lt;%=</span>Labels<span class="sy0">.</span>get<span class="br0">&#40;</span><span class="st0">&quot;regions.&quot;</span> <span class="sy0">+</span> fvalues<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">,</span> request<span class="sy0">.</span>getLocale<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy1">%&gt;</span>
 <span class="sy1">&lt;%</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 <span class="sy1">%&gt;</span>
&nbsp;
 <span class="sy1">&lt;%</span>
 <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>editable<span class="br0">&#41;</span> <span class="br0">&#123;</span>
 <span class="kw1">for</span> <span class="br0">&#40;</span>int i<span class="sy0">=</span><span class="nu0">0</span><span class="sy0">;</span> i<span class="sy0">&lt;</span>fvalues<span class="sy0">.</span>length<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
 <span class="sy1">%&gt;</span>
 &lt;input type=&quot;hidden&quot; name=&quot;<span class="sy1">&lt;%=</span>propertyKey<span class="sy1">%&gt;</span>&quot; value=&quot;<span class="sy1">&lt;%=</span>fvalues<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy1">%&gt;</span>&quot;&gt;
 <span class="sy1">&lt;%</span>
 <span class="br0">&#125;</span>
 <span class="br0">&#125;</span>
 <span class="sy1">%&gt;</span></pre>

Как вы, наверное, уже заметили, реализация примерно такая же, как и для редактора одного значения (single value editor). Основное отличие в том, что форматируемое значение (1) в данном случае массив строк (<em>String []</em>), а не простая строка (<em>String</em>).<br />
<h3 id="toc4"><a name="xГлава 9: Расширенные возможности-Редакторы-Пользовательские редакторы и стереотипы для отображения комбо-списков"></a>Пользовательские редакторы и стереотипы для отображения комбо-списков</h3>
 OpenXava позволяет вместо непосредственного редактирования значений свойства создавать комбо-списки значений свойства и позволять выбирать пользователю из них. При этом список значений, отображаемый в combo-списке, загружается из БД.<br />
Давайте посмотрим, как это реализуется.<br />
Для начала нужно определить свойство:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.java5  {font-family:monospace;}
.java5 .imp {font-weight: bold; color: red;}
.java5 .kw1 {color: #000000;  font-weight: bold;}
.java5 .kw2 {color: #000000; font-weight: bold;}
.java5 .kw3 {color: #006600; font-weight: bold;}
.java5 .kw4 {color: #006600; font-weight: bold;}
.java5 .kw5 {color: #003399; font-weight: bold;}
.java5 .kw6 {color: #003399; font-weight: bold;}
.java5 .kw7 {color: #003399; font-weight: bold;}
.java5 .kw8 {color: #003399; font-weight: bold;}
.java5 .kw9 {color: #003399; font-weight: bold;}
.java5 .kw10 {color: #003399; font-weight: bold;}
.java5 .kw11 {color: #003399; font-weight: bold;}
.java5 .kw12 {color: #003399; font-weight: bold;}
.java5 .kw13 {color: #003399; font-weight: bold;}
.java5 .kw14 {color: #003399; font-weight: bold;}
.java5 .kw15 {color: #003399; font-weight: bold;}
.java5 .kw16 {color: #003399; font-weight: bold;}
.java5 .kw17 {color: #003399; font-weight: bold;}
.java5 .kw18 {color: #003399; font-weight: bold;}
.java5 .kw19 {color: #003399; font-weight: bold;}
.java5 .kw20 {color: #003399; font-weight: bold;}
.java5 .kw21 {color: #003399; font-weight: bold;}
.java5 .kw22 {color: #003399; font-weight: bold;}
.java5 .kw23 {color: #003399; font-weight: bold;}
.java5 .kw24 {color: #003399; font-weight: bold;}
.java5 .kw25 {color: #003399; font-weight: bold;}
.java5 .kw26 {color: #003399; font-weight: bold;}
.java5 .kw27 {color: #003399; font-weight: bold;}
.java5 .kw28 {color: #003399; font-weight: bold;}
.java5 .kw29 {color: #003399; font-weight: bold;}
.java5 .kw30 {color: #003399; font-weight: bold;}
.java5 .kw31 {color: #003399; font-weight: bold;}
.java5 .kw32 {color: #003399; font-weight: bold;}
.java5 .kw33 {color: #003399; font-weight: bold;}
.java5 .kw34 {color: #003399; font-weight: bold;}
.java5 .kw35 {color: #003399; font-weight: bold;}
.java5 .kw36 {color: #003399; font-weight: bold;}
.java5 .kw37 {color: #003399; font-weight: bold;}
.java5 .kw38 {color: #003399; font-weight: bold;}
.java5 .kw39 {color: #003399; font-weight: bold;}
.java5 .kw40 {color: #003399; font-weight: bold;}
.java5 .kw41 {color: #003399; font-weight: bold;}
.java5 .kw42 {color: #003399; font-weight: bold;}
.java5 .kw43 {color: #003399; font-weight: bold;}
.java5 .kw44 {color: #003399; font-weight: bold;}
.java5 .kw45 {color: #003399; font-weight: bold;}
.java5 .kw46 {color: #003399; font-weight: bold;}
.java5 .kw47 {color: #003399; font-weight: bold;}
.java5 .kw48 {color: #003399; font-weight: bold;}
.java5 .kw49 {color: #003399; font-weight: bold;}
.java5 .kw50 {color: #003399; font-weight: bold;}
.java5 .kw51 {color: #003399; font-weight: bold;}
.java5 .kw52 {color: #003399; font-weight: bold;}
.java5 .kw53 {color: #003399; font-weight: bold;}
.java5 .kw54 {color: #003399; font-weight: bold;}
.java5 .kw55 {color: #003399; font-weight: bold;}
.java5 .kw56 {color: #003399; font-weight: bold;}
.java5 .kw57 {color: #003399; font-weight: bold;}
.java5 .kw58 {color: #003399; font-weight: bold;}
.java5 .kw59 {color: #003399; font-weight: bold;}
.java5 .kw60 {color: #003399; font-weight: bold;}
.java5 .kw61 {color: #003399; font-weight: bold;}
.java5 .kw62 {color: #003399; font-weight: bold;}
.java5 .kw63 {color: #003399; font-weight: bold;}
.java5 .kw64 {color: #003399; font-weight: bold;}
.java5 .kw65 {color: #003399; font-weight: bold;}
.java5 .kw66 {color: #003399; font-weight: bold;}
.java5 .kw67 {color: #003399; font-weight: bold;}
.java5 .kw68 {color: #003399; font-weight: bold;}
.java5 .kw69 {color: #003399; font-weight: bold;}
.java5 .kw70 {color: #003399; font-weight: bold;}
.java5 .kw71 {color: #003399; font-weight: bold;}
.java5 .kw72 {color: #003399; font-weight: bold;}
.java5 .kw73 {color: #003399; font-weight: bold;}
.java5 .kw74 {color: #003399; font-weight: bold;}
.java5 .kw75 {color: #003399; font-weight: bold;}
.java5 .kw76 {color: #003399; font-weight: bold;}
.java5 .kw77 {color: #003399; font-weight: bold;}
.java5 .kw78 {color: #003399; font-weight: bold;}
.java5 .kw79 {color: #003399; font-weight: bold;}
.java5 .kw80 {color: #003399; font-weight: bold;}
.java5 .kw81 {color: #003399; font-weight: bold;}
.java5 .kw82 {color: #003399; font-weight: bold;}
.java5 .kw83 {color: #003399; font-weight: bold;}
.java5 .kw84 {color: #003399; font-weight: bold;}
.java5 .kw85 {color: #003399; font-weight: bold;}
.java5 .kw86 {color: #003399; font-weight: bold;}
.java5 .kw87 {color: #003399; font-weight: bold;}
.java5 .kw88 {color: #003399; font-weight: bold;}
.java5 .kw89 {color: #003399; font-weight: bold;}
.java5 .kw90 {color: #003399; font-weight: bold;}
.java5 .kw91 {color: #003399; font-weight: bold;}
.java5 .kw92 {color: #003399; font-weight: bold;}
.java5 .kw93 {color: #003399; font-weight: bold;}
.java5 .kw94 {color: #003399; font-weight: bold;}
.java5 .kw95 {color: #003399; font-weight: bold;}
.java5 .kw96 {color: #003399; font-weight: bold;}
.java5 .kw97 {color: #003399; font-weight: bold;}
.java5 .kw98 {color: #003399; font-weight: bold;}
.java5 .kw99 {color: #003399; font-weight: bold;}
.java5 .kw100 {color: #003399; font-weight: bold;}
.java5 .kw101 {color: #003399; font-weight: bold;}
.java5 .kw102 {color: #003399; font-weight: bold;}
.java5 .kw103 {color: #003399; font-weight: bold;}
.java5 .kw104 {color: #003399; font-weight: bold;}
.java5 .kw105 {color: #003399; font-weight: bold;}
.java5 .kw106 {color: #003399; font-weight: bold;}
.java5 .kw107 {color: #003399; font-weight: bold;}
.java5 .kw108 {color: #003399; font-weight: bold;}
.java5 .kw109 {color: #003399; font-weight: bold;}
.java5 .kw110 {color: #003399; font-weight: bold;}
.java5 .kw111 {color: #003399; font-weight: bold;}
.java5 .kw112 {color: #003399; font-weight: bold;}
.java5 .kw113 {color: #003399; font-weight: bold;}
.java5 .kw114 {color: #003399; font-weight: bold;}
.java5 .kw115 {color: #003399; font-weight: bold;}
.java5 .kw116 {color: #003399; font-weight: bold;}
.java5 .kw117 {color: #003399; font-weight: bold;}
.java5 .kw118 {color: #003399; font-weight: bold;}
.java5 .kw119 {color: #003399; font-weight: bold;}
.java5 .kw120 {color: #003399; font-weight: bold;}
.java5 .kw121 {color: #003399; font-weight: bold;}
.java5 .kw122 {color: #003399; font-weight: bold;}
.java5 .kw123 {color: #003399; font-weight: bold;}
.java5 .kw124 {color: #003399; font-weight: bold;}
.java5 .kw125 {color: #003399; font-weight: bold;}
.java5 .kw126 {color: #003399; font-weight: bold;}
.java5 .kw127 {color: #003399; font-weight: bold;}
.java5 .kw128 {color: #003399; font-weight: bold;}
.java5 .kw129 {color: #003399; font-weight: bold;}
.java5 .kw130 {color: #003399; font-weight: bold;}
.java5 .kw131 {color: #003399; font-weight: bold;}
.java5 .kw132 {color: #003399; font-weight: bold;}
.java5 .kw133 {color: #003399; font-weight: bold;}
.java5 .kw134 {color: #003399; font-weight: bold;}
.java5 .kw135 {color: #003399; font-weight: bold;}
.java5 .kw136 {color: #003399; font-weight: bold;}
.java5 .kw137 {color: #003399; font-weight: bold;}
.java5 .kw138 {color: #003399; font-weight: bold;}
.java5 .kw139 {color: #003399; font-weight: bold;}
.java5 .kw140 {color: #003399; font-weight: bold;}
.java5 .kw141 {color: #003399; font-weight: bold;}
.java5 .kw142 {color: #003399; font-weight: bold;}
.java5 .kw143 {color: #003399; font-weight: bold;}
.java5 .kw144 {color: #003399; font-weight: bold;}
.java5 .kw145 {color: #003399; font-weight: bold;}
.java5 .kw146 {color: #003399; font-weight: bold;}
.java5 .kw147 {color: #003399; font-weight: bold;}
.java5 .kw148 {color: #003399; font-weight: bold;}
.java5 .kw149 {color: #003399; font-weight: bold;}
.java5 .kw150 {color: #003399; font-weight: bold;}
.java5 .kw151 {color: #003399; font-weight: bold;}
.java5 .kw152 {color: #003399; font-weight: bold;}
.java5 .kw153 {color: #003399; font-weight: bold;}
.java5 .kw154 {color: #003399; font-weight: bold;}
.java5 .kw155 {color: #003399; font-weight: bold;}
.java5 .kw156 {color: #003399; font-weight: bold;}
.java5 .kw157 {color: #003399; font-weight: bold;}
.java5 .kw158 {color: #003399; font-weight: bold;}
.java5 .kw159 {color: #003399; font-weight: bold;}
.java5 .kw160 {color: #003399; font-weight: bold;}
.java5 .kw161 {color: #003399; font-weight: bold;}
.java5 .kw162 {color: #003399; font-weight: bold;}
.java5 .kw163 {color: #003399; font-weight: bold;}
.java5 .kw164 {color: #003399; font-weight: bold;}
.java5 .kw165 {color: #003399; font-weight: bold;}
.java5 .kw166 {color: #003399; font-weight: bold;}
.java5 .co1 {color: #666666; font-style: italic;}
.java5 .co2 {color: #006699;}
.java5 .co3 {color: #008000; font-style: italic; font-weight: bold;}
.java5 .coMULTI {color: #666666; font-style: italic;}
.java5 .es0 {color: #000099; font-weight: bold;}
.java5 .br0 {color: #009900;}
.java5 .sy0 {color: #339933;}
.java5 .st0 {color: #0000ff;}
.java5 .nu0 {color: #cc66cc;}
.java5 .me1 {color: #006633;}
.java5 .me2 {color: #006633;}
.java5 span.xtra { display:block; }

-->
</style><pre class="java5"> @Stereotype<span class="br0">&#40;</span><span class="st0">&quot;FAMILY&quot;</span><span class="br0">&#41;</span>
 <span class="kw2">private</span> <span class="kw3">int</span> familyNumber<span class="sy0">;</span>
&nbsp;
 @Stereotype<span class="br0">&#40;</span><span class="st0">&quot;SUBFAMILY&quot;</span><span class="br0">&#41;</span>
 <span class="kw2">private</span> <span class="kw3">int</span> subfamilyNumber<span class="sy0">;</span>
&nbsp;</pre>

Затем необходимо сконфигурировать редактор(ы) для данных свойств (вернее, их стереотипов) в файле <em>editors.xml</em>:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;editor</span> <span class="re0">url</span>=<span class="st0">&quot;descriptionsEditor.jsp&quot;</span><span class="re2">&gt;</span></span> <span class="sc-1">&lt;!-- 10 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;model&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;Family&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 1 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;keyProperty&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;number&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 2 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;descriptionProperty&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;description&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 3 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;orderByKey&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;true&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 4 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;readOnlyAsLabel&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;true&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 5 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;for-stereotype</span> <span class="re0">stereotype</span>=<span class="st0">&quot;FAMILY&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 11 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;/editor<span class="re2">&gt;</span></span></span>
&nbsp;
 <span class="sc-1">&lt;!-- Возможно специфицировать зависимости от стереотипов или свойств --&gt;</span>
 <span class="sc3"><span class="re1">&lt;editor</span> <span class="re0">url</span>=<span class="st0">&quot;descriptionsEditor.jsp&quot;</span> &lt;!-- 10 --<span class="re2">&gt;</span></span>
 depends-stereotypes=&quot;FAMILY&quot;&gt; <span class="sc-1">&lt;!-- 12 --&gt;</span>
 <span class="sc-1">&lt;!--</span>
<span class="sc-1"> &lt;editor url=&quot;descriptionsEditor.jsp&quot; depends-properties=&quot;familyNumber&quot;&gt; &lt;!-- 13 --&gt;</span>
 --&gt;
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;model&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;Subfamily&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 1 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;keyProperty&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;number&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 2 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;descriptionProperties&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;number, description&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 3 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;condition&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;${familyNumber} = ?&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 6 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;parameterValuesStereotypes&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;FAMILY&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 7 --&gt;</span>
 <span class="sc-1">&lt;!--</span>
<span class="sc-1"> &lt;property name=&quot;parameterValuesProperties&quot; value=&quot;familyNumber&quot;/&gt; &lt;!-- 8 --&gt;</span>
 --&gt;
 <span class="sc3"><span class="re1">&lt;property</span> <span class="re0">name</span>=<span class="st0">&quot;descriptionsFormatter&quot;</span> &lt;!-- 9 --<span class="re2">&gt;</span></span>
 value=&quot;org.openxava.test.formatters.FamilyDescriptionsFormatter&quot;/&gt;
 <span class="sc3"><span class="re1">&lt;for-stereotype</span> <span class="re0">stereotype</span>=<span class="st0">&quot;SUBFAMILY&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 11 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;/editor<span class="re2">&gt;</span></span></span></pre>

Тепер, при отображении свойств <em>familyNumber</em> и <em>subfamilyNumber</em>) OpenXava будет показывать combo-список для каждого из свойств. При этом сначала комбо-список для свойста <em>family</em> (фамилия) будет заполнен всеми уже созданными в БД фамилиями, а комбо-список <em>subfamily</em> будет пустой. Затем, когда пользователь выберет значение для свойства <em>family</em>, то комбо-список свойства <em>subfamily</em> заполниться из БД и пользователь сможет выбрать значение и для данного свойства.<br />
Чтобы выше описанная логика заработала, вам необходимо указать редактор <em>descriptionsEditor.jsp</em> (10) для стереотипов FAMILY и SUBFAMILY (11) и сконфигурировать корректную передачу параметров в редактор.<br />
Некоторые из параметров, которые можно передать в редактор:<br />
<ol><li><strong>model</strong>: Модель, из которой будут извлекаться данные. Это может быть имя сущности(например, <em>Invoice</em>) или имя модели для <a class="wiki_link" href="model_ru.html#toc24">встраимаемой коллекции</a> (например, <em>Invoice.InvoiceDetail</em>).</li><li><strong>keyProperty</strong> или <strong>keyProperties</strong>: Ключевое свойство или список ключевых свойств. Этот элемент используется для получения значения текущего свойства. Данный элемент не обязателен, т.к. обычно для извлечения значения свойства используются ключевые свойства модели, поэтому определение данного элемента не нужно.</li><li><strong>descriptionProperty</strong> или <strong>descriptionProperties</strong>: Свойство или список свойств для отображения в комбо-списке.</li><li><strong>orderByKey</strong>: If it has to be ordered by the key, by default it is ordered by description. You can also use order with an order clause in SQL style if you need it.</li><li><strong>readOnlyAsLabel</strong>: Если свойство доступно только для чтения, то отображать его как текстовую метку HTML. Значение по-умолчанию <em>false</em>.</li><li><strong>condition</strong>: Условие ограничения отображаемых данных. Has SQL format, but you can use the property names with <em>${}</em>, even qualified properties are supported. You can put arguments with <em>?</em>. This last case is when this property depends on other ones and only obtain data when these other properties change.</li><li><strong>parameterValuesStereotypes</strong>: Список стереотип, от которых зависит данное свойство. It's used to fill the condition arguments and has to match with <em>depends-stereotypes</em> attribute (12).</li><li><strong>parameterValuesProperties</strong>: Список свойств, от которых зависят данные свойства. It's used to fill the condition arguments and has to match with <em>depends-properties</em> attribute (13).</li><li><strong>descriptionsFormatter</strong>: Класс-форматтер для описаний (descriptions), отображаемых в комбо-списке. Форматтер должен реализовывать интерфейс <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/formatters/IFormatter.html" rel="nofollow">IFormatter</a></em>.</li></ol>Использую ниже приведённый пример, вы научите ваши стереотипы отображать простое свойство в виде комбо-списка, заполняемого динамическими данными. Тем не менее, в большинстве случаев более удобно использовать <a class="wiki_link" href="view_ru.html#toc17">ссылки, отображаемые с помощью @DescriptionsList</a>.<br />
<h2 id="toc5"><a name="xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)"></a>Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)</h2>
 OpenXava предоставляет широчайшие возможности по настройке пользовательского интерфейса, об этом рассказано в <a class="wiki_link" href="view_ru.html">главе 4</a>. Если имеющие возможности настройки интерфейса не достаточны, то вы можете создать собственные представления, используя JSP. При этом вы можете использовать библиотеки тегов, предоставляемые OpenXava. Давайте рассмотрим выше сказанное на примере выше.<br />
<h3 id="toc6"><a name="xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)-Пример"></a>Пример</h3>
 Сначала, нужно сообщить модулю, что вы хотите использовать собственные страницы JSP. Для этого нужно внести изменения в файл <em>application.xml</em>:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;module</span> <span class="re0">name</span>=<span class="st0">&quot;SellersJSP&quot;</span> <span class="re0">folder</span>=<span class="st0">&quot;invoicing.variations&quot;</span><span class="re2">&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;model</span> <span class="re0">name</span>=<span class="st0">&quot;Seller&quot;</span><span class="re2">/&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;view</span> <span class="re0">name</span>=<span class="st0">&quot;ForCustomJSP&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 1 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;web-view</span> <span class="re0">url</span>=<span class="st0">&quot;custom-jsp/seller.jsp&quot;</span><span class="re2">/&gt;</span></span> <span class="sc-1">&lt;!-- 2 --&gt;</span>
 <span class="sc3"><span class="re1">&lt;controller</span> <span class="re0">name</span>=<span class="st0">&quot;Typical&quot;</span><span class="re2">/&gt;</span></span>
 <span class="sc3"><span class="re1">&lt;/module<span class="re2">&gt;</span></span></span></pre>

Если вы переопределите тег <em>web-view</em> (2) для модуля, OpenXava будет использовать вашу страницу JSP для отображения представления detail вместо того, чтобы создавать представление view автоматически. Optionally you can define an OpenXava view using <em>view</em> (1), this view is used to know the events to throw and the properties to populate, if not it is specified the default view of the entity is used; although it's advisable to create an explicit OpenXava view for your JSP custom view, in this way you can control the events, the properties to populate, the focus order, etc explicitly. You can put your JSP inside <em>web/custom-jsp</em> (or other of your choice) folder of your project, and it can be as this one:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.php  {font-family:monospace;}
.php .imp {font-weight: bold; color: red;}
.php .kw1 {color: #b1b100;}
.php .kw2 {color: #000000; font-weight: bold;}
.php .kw3 {color: #990000;}
.php .kw4 {color: #009900; font-weight: bold;}
.php .co1 {color: #666666; font-style: italic;}
.php .co2 {color: #666666; font-style: italic;}
.php .co3 {color: #0000cc; font-style: italic;}
.php .co4 {color: #009933; font-style: italic;}
.php .coMULTI {color: #666666; font-style: italic;}
.php .es0 {color: #000099; font-weight: bold;}
.php .es1 {color: #000099; font-weight: bold;}
.php .es2 {color: #660099; font-weight: bold;}
.php .es3 {color: #660099; font-weight: bold;}
.php .es4 {color: #006699; font-weight: bold;}
.php .es5 {color: #006699; font-weight: bold; font-style: italic;}
.php .es6 {color: #009933; font-weight: bold;}
.php .es_h {color: #000099; font-weight: bold;}
.php .br0 {color: #009900;}
.php .sy0 {color: #339933;}
.php .sy1 {color: #000000; font-weight: bold;}
.php .st0 {color: #0000ff;}
.php .st_h {color: #0000ff;}
.php .nu0 {color: #cc66cc;}
.php .nu8 {color: #208080;}
.php .nu12 {color: #208080;}
.php .nu19 {color:#800080;}
.php .me1 {color: #004000;}
.php .me2 {color: #004000;}
.php .re0 {color: #000088;}
.php span.xtra { display:block; }

-->
</style><pre class="php"> <span class="sy1">&lt;%</span><span class="sy0">@</span> <span class="kw1">include</span> <span class="kw3">file</span><span class="sy0">=</span><span class="st0">&quot;../xava/imports.jsp&quot;</span><span class="sy1">%&gt;</span>
&nbsp;
 &lt;table&gt;
 &lt;tr&gt;
 &lt;td&gt;Number: &lt;/td&gt;
 &lt;td&gt;
 &lt;xava:editor property=&quot;number&quot;/&gt;
 &lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;Name: &lt;/td&gt;
 &lt;td&gt;
 &lt;xava:editor property=&quot;name&quot;/&gt;
 &lt;/td&gt;
 &lt;/tr&gt;
&nbsp;
 &lt;tr&gt;
 &lt;td&gt;Level: &lt;/td&gt;
 &lt;td&gt;
 &lt;xava:editor property=&quot;level.id&quot;/&gt;
 &lt;xava:editor property=&quot;level.description&quot;/&gt;
 &lt;/td&gt;
 &lt;/tr&gt;
 &lt;/table&gt;</pre>

Только ваша фантазия ограчивает функциональность вашей страницы JSP. Тем не менее, мы рекомендуем по возможности использовать стандартные теги OpenXava. В этом случае вам не придется заново изобретать велосипед, интегрируя свой код с OpenXava. Например, тег <em>&lt;xava:editor/&gt;</em> отображает редактор для редактирования / отображения значения свойства. Данный тег в том числе создает скрипт javascript для инициации событий, необходимых для корректной работы OX. При использовании тега <em>&lt;xava:editor/&gt; управление</em> отображаемыми данными осуществляется через объект <em>xava_view</em> (тип <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html" rel="nofollow">org.openxava.view.View</a></em> ). По-умолчанию используются стандартные контролеры OpenXava (включая <em>CRUD</em>).<br />
Можно использовать квалицированные имена свойств (qualified properties) (например, <em>level.id</em> или <em>level.description</em>) <em>(начиная с версии v2.0.1)</em>, более того, OX заменит <em>level.id</em>, <em>level.description</em> на соответствующие реальные значения. Если вы используете теги JSP из библиотеки OpenXava, то все возможности стандартного поведения интерфейса доступны внутри вашей страницы JSP.<br />
Давайте рассмотрим теги из библиотеки OpenXava taglibs.<br />
<h3 id="toc7"><a name="xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)-xava:editor"></a>xava:editor</h3>
 Тег <em>&lt;xava:editor/&gt;</em> создает редактор для свойства (т.е. HTML control) точно также, как делает OpenXava при автоматической генерации интерфейса.<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;xava:editor</span></span>
<span class="sc3"> <span class="re0">property</span>=<span class="st0">&quot;propertyName&quot;</span> &lt;!-- 1 --<span class="re2">&gt;</span></span>
 editable=&quot;true|false&quot; <span class="sc-1">&lt;!-- 2 New in v2.0.1 --&gt;</span>
 throwPropertyChanged=&quot;true|false&quot; <span class="sc-1">&lt;!-- 3 New in v2.0.1 --&gt;</span>
 /&gt;</pre>

<ol><li><strong>property</strong> (обязательный параметр): Свойство модели, ассоциированной с текущим модулем</li><li><strong>editable</strong> (необязательный параметр): <em>Начиная с версии v2.0.1</em>. Наделяет редактор возможностью редактирования. Если параметр не определен, то используется значение по-умолчанию.</li><li><strong>throwPropertyChanged</strong> (необязательный параметр): <em>Начиная с версии</em> <em>v2.0.1</em>. Сообщает редактору о необходимости генерировать события изменения свойства (throws property changed event). Если параметр не определен, то используется значение по-умолчанию.</li></ol>Данный тег создает скрипт JavaScript точно такой же, как используется в представлении, созданном автоматически. Поддерживается использование квалифицированных свойств (qualified properties (properties of references)) <em>(начиная с версии v2.0.1)</em>.<br />
<h3 id="toc8"><a name="xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)-Теги xava:action, xava:link, xava:image, xava:button"></a>Теги xava:action, xava:link, xava:image, xava:button</h3>
 Тег <em>&lt;xava:action/&gt;</em> позволяет отобразить &quot;действие&quot;, т.е. кнопку или изображение, при нажатии которого выполняется действие OX.<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;xava:action</span> <span class="re0">action</span>=<span class="st0">&quot;controller.action&quot;</span> <span class="re0">argv</span>=<span class="st0">&quot;argv&quot;</span><span class="re2">/&gt;</span></span></pre>

Аттрибуты тега <em>action</em> указывают действие, которое нужно выполнить (параметр <em>action</em>), и параметры для передачи данному действию (параметр <em>argv</em> , необязателен). Пример:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;xava:action</span> <span class="re0">action</span>=<span class="st0">&quot;CRUD.save&quot;</span> <span class="re0">argv</span>=<span class="st0">&quot;resetAfter=true&quot;</span><span class="re2">/&gt;</span></span></pre>

В данном примере, если пользователь кликнет по данному &quot;действию&quot;, то будет выполнено действие <em>CRUD.save</em>, перед этим будет выставлено свойство <em>resetAfter</em> property данного действия.<br />
Действие отображается как изображение, если с ним ассоциировано изображение. В противном случае, оно отображается как кнопка.Если вы хотите жестко определить стиль отображения, то вам необходимо вместо <em>&lt;xava:action/&gt;</em> использовать теги с предопределенным стилем <em>&lt;xava:button/&gt;</em> (кнопка), <em>&lt;xava:image/&gt;</em> (изображние) или <em>&lt;xava:link/&gt;</em> (ссылка).<br />
Действие может иметь пустое значение <em>(начиная с версии v2.2.1)</em>. Пример:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;xava:action</span> <span class="re0">action</span>=<span class="st0">&quot;&quot;</span><span class="re2">/&gt;</span></span></pre>

В этом примере данный тег не выполняет никаких действий и не генерирует ошибок. Такой вариант использования тега , если вы формируете имя действия автоматически (например, так <em>action=”&lt;%=mycode()%&gt;”</em>) и значение имени действия в некоторых случаях может быть незаполнено.<br />
<h3 id="toc9"><a name="xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)-Тег xava:message (начиная с версии v2.0.3)"></a>Тег xava:message (начиная с версии v2.0.3)</h3>
 Тег <em>&lt;xava:message/&gt;</em> позволяет отобразить в HTML сообщение из ресусных файлов i18n OpenXava.<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;xava:message</span> <span class="re0">key</span>=<span class="st0">&quot;message_key&quot;</span> <span class="re0">param</span>=<span class="st0">&quot;messageParam&quot;</span> <span class="re0">intParam</span>=<span class="st0">&quot;messageParam&quot;</span><span class="re2">/&gt;</span></span></pre>

Сначала OX ищет сообщение в файлах конкретного проекта (<em>YourProject/i18n/YourProject-messages.properties</em>). Если такой идентификатор сообщения <em>message_key</em> там не определен, то поиск продолжается в стандартных файлах OpenXava (<em>OpenXava/i18n/Messages.properties</em>).<br />
Аттрибуты <em>param</em> и <em>intParam</em> являются необязательными. Параметр <em>intParam</em> используется, если для корректного отображения сообщения необходимо передать параметр типа <em>int</em>. Если вы используете Java 5, то можете всегда использовать нетипизированный аттрибут <em>param</em>, параметр будет приведен к нужному типу автоматически (autoboxing) .<br />
Данные тег отображает сообщение как простой текст и не поддерживает форматирование тегами HTML.<br />
Пример:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;xava:message</span> <span class="re0">key</span>=<span class="st0">&quot;list_count&quot;</span> <span class="re0">intParam</span>=<span class="st0">&quot;&lt;%=totalSize%&gt;</span></span>&quot;/&gt;</pre>

<h3 id="toc10"><a name="xГлава 9: Расширенные возможности-Пользовательские представления JSP и библиотека тегов OpenXava (OX taglibs)-Тег xava:descriptionsList (начиная с версии v2.0.3)"></a>Тег xava:descriptionsList (начиная с версии v2.0.3)</h3>
 Тег <em>&lt;xava:descriptionsList/&gt;</em> позволяет вам отрисовать комбо-список HTML для свойства-ссылки таким же образом, как это делает OpenXava, когда создает пользовательский интерфейс автоматически.<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.xml  {font-family:monospace;}
.xml .imp {font-weight: bold; color: red;}
.xml .es0 {color: #000099; font-weight: bold;}
.xml .br0 {color: #66cc66;}
.xml .sy0 {color: #66cc66;}
.xml .st0 {color: #ff0000;}
.xml .sc-1 {color: #808080; font-style: italic;}
.xml .sc0 {color: #00bbdd;}
.xml .sc1 {color: #ddbb00;}
.xml .sc2 {color: #339933;}
.xml .sc3 {color: #009900;}
.xml .re0 {color: #000066;}
.xml .re1 {color: #000000; font-weight: bold;}
.xml .re2 {color: #000000; font-weight: bold;}
.xml span.xtra { display:block; }

-->
</style><pre class="xml"> <span class="sc3"><span class="re1">&lt;xava:descriptionsList</span></span>
<span class="sc3"> <span class="re0">reference</span>=<span class="st0">&quot;referenceName&quot;</span> &lt;!-- 1 --<span class="re2">&gt;</span></span>
 /&gt;</pre>

Параметры:<br />
<ol><li><strong>reference</strong> (обязательный параметр): Ссылка на модель, ассоциированную с текущем модулем.</li></ol>Данный тег добавляет JavaScript, что позволяет представлению работать точно также, как если бы пользовательский интерфейс был сгенерирован автоматически.<br />
Пример:<br />

<style type="text/css"><!--
/**
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 */
.php  {font-family:monospace;}
.php .imp {font-weight: bold; color: red;}
.php .kw1 {color: #b1b100;}
.php .kw2 {color: #000000; font-weight: bold;}
.php .kw3 {color: #990000;}
.php .kw4 {color: #009900; font-weight: bold;}
.php .co1 {color: #666666; font-style: italic;}
.php .co2 {color: #666666; font-style: italic;}
.php .co3 {color: #0000cc; font-style: italic;}
.php .co4 {color: #009933; font-style: italic;}
.php .coMULTI {color: #666666; font-style: italic;}
.php .es0 {color: #000099; font-weight: bold;}
.php .es1 {color: #000099; font-weight: bold;}
.php .es2 {color: #660099; font-weight: bold;}
.php .es3 {color: #660099; font-weight: bold;}
.php .es4 {color: #006699; font-weight: bold;}
.php .es5 {color: #006699; font-weight: bold; font-style: italic;}
.php .es6 {color: #009933; font-weight: bold;}
.php .es_h {color: #000099; font-weight: bold;}
.php .br0 {color: #009900;}
.php .sy0 {color: #339933;}
.php .sy1 {color: #000000; font-weight: bold;}
.php .st0 {color: #0000ff;}
.php .st_h {color: #0000ff;}
.php .nu0 {color: #cc66cc;}
.php .nu8 {color: #208080;}
.php .nu12 {color: #208080;}
.php .nu19 {color:#800080;}
.php .me1 {color: #004000;}
.php .me2 {color: #004000;}
.php .re0 {color: #000088;}
.php span.xtra { display:block; }

-->
</style><pre class="php"> <span class="sy0">&lt;</span>tr<span class="sy0">&gt;</span>
 <span class="sy0">&lt;</span>td<span class="sy0">&gt;</span>Level<span class="sy0">:</span> <span class="sy0">&lt;/</span>td<span class="sy0">&gt;</span>
 <span class="sy0">&lt;</span>td<span class="sy0">&gt;</span>
 <span class="sy0">&lt;</span>xava<span class="sy0">:</span>descriptionsList reference<span class="sy0">=</span><span class="st0">&quot;level&quot;</span><span class="sy0">/&gt;</span>
 <span class="sy0">&lt;/</span>td<span class="sy0">&gt;</span>
 <span class="sy0">&lt;/</span>tr<span class="sy0">&gt;</span></pre>

В данном примере <em>level</em> (уровень) - это свойство-ссылка текущей модели(например, <em>Seller</em>). Комбо-список будет отображать список всех доступных уровней.
    </div>
  </body>
</html>